# 跨域
## 1.解决方案
通过设置 `Access-Control-Allow-Origin` 来实现跨域访问。

1.允许指定域名跨域访问，只需在服务端入口或者基类设置 `header` 。
```
header('Access-Control-Allow-Origin:https://sakura.adomikao.com');
```

2.允许所有域名跨域访问，可以使用通配符 ` * `。
```
header('Access-Control-Allow-Origin:*');
```
## 2.什么是跨域

|https://|www.|adomikao.com|:8080|/script/jquery.js|
|:-----  |:-----   |:-----    |-----    |-----     |
|协议 |子域名   |主域名  |端口号  |请求资源地址       |
当协议、子域名、主域名、端口号中任意一个不相同时，都算作不同域。不同域之间相互请求资源，就算作`跨域`。

`JavaScript` 出于安全考虑，不允许跨域调用其他页面的对象，`a.com` 域名下的 js 无法操作 `b.com` 或是 `c.a.com` 域名下的对象。跨域并不是请求发不出去，请求能发出去，服务端能收到请求并正常返回结果，只是结果被浏览器拦截了。之所以会跨域，是因为受到了同源策略的限制，同源策略要求源相同才能正常进行通信，即协议、域名、端口号都完全一致。

## 3.同源策略及其限制
同源策略限制从一个源加载的文档或脚本与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的关键安全机制。它的存在可以保护用户隐私信息，防止身份伪造等 ( 读取 Cookie )。

同源策略限制的内容有：
- AJAX 请求不能发送
- Cookie、LocalStorage、IndexedDB 等存储性内容
- DOM 节点

Cookie 是服务器写入浏览器的一小段信息，只有同源的网页才能共享。但是，两个网页一级域名相同，只是二级域名不同，浏览器允许通过设置 `document.domain` 共享 Cookie。
```
document.domain = 'adomikao.com';
```
另外，服务器也可以在设置 Cookie 的时候，指定 Cookie 的所属域名为一级域名，这样的话，二级域名和三级域名不用做任何设置，都可以读取这个Cookie。`.adomikao.com` 。
```
Set-Cookie: key=value; domain=.adomikao.com; path=/
```

